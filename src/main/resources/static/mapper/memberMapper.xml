<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.eutchapedia.login.dao.MemberDaoInterface">

	<!-- 회원 가입 -->
    <insert id="signup" parameterType="kr.or.eutchapedia.login.vo.MemberVo">
	     insert into member
	     values
	     (#{memberEmail}, 
	      #{memberNickname}, 
	      #{memberPwd}, 
	      #{memberPwdSalt}, default, default, default, null, null, default)   
    </insert>
    
    <select id="emailchk" resultType="int">
   		SELECT COUNT(*) from member 
   		WHERE member_email = #{memberEmail}
	</select>
    
    <!-- 닉네임 중복 체크 -->
    <select id="nicknamechk" resultType="int">
    	select count(*) from member where member_nickname = #{memberNickname, jdbcType=VARCHAR}
    </select>
	
	<!-- 로그인 -->
	<select id="login" resultType="kr.or.eutchapedia.login.vo.MemberVo">
		select member_email, member_pwd
		from member
		where member_email = #{memberEmail}
		and member_pwd = #{memberPwd}
	</select>
	
	<resultMap
		type="kr.or.eutchapedia.login.vo.MemberVo" id="MemberVo">
		<result column="member_email" property="memberEmail" />
		<result column="member_nickname" property="memberNickname" />
		<result column="member_pwd" property="memberPwd" />
		<result column="member_pwd_salt" property="memberPwdSalt" />
		<result column="member_date" property="memberDate" />
		<result column="admin_check" property="adminCheck" />
		<result column="member_status" property="memberStatus" />
		<result column="member_photo" property="memberPhoto" />
		<result column="member_introduce" property="memberIntroduce" />
		<result column="member_join_route" property="memberJoinRoute" />
  </resultMap>
</mapper>